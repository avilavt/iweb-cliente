<!DOCTYPE html>
<html>
<head>
<title>Bikes in MÃ¡laga</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
</head>
<body>
    <div class="navbar">
        <div class="navbar-inner">
            <a class="brand" href="http://127.0.0.1:5001/home/">Home</a>
            <a class="brand" href="http://127.0.0.1:5001/bicilane/">Bici Lanes</a>
            <a class="brand" href="http://127.0.0.1:5001/bicipark/">Bici Parkings</a>
            <a class="brand" href="http://127.0.0.1:5001/profile/"> {{logUser['rol']}} : {{logUser['nombre']}} </a>
        </div>
    </div>
    <!-- url = "http://127.0.0.1:5000/IWeb/webresources/entity.usuario/" -->
    <div id="main" class="container">
        <div class="span3">
            <h2>Sign Up</h2>
            <form  id="userForm" onSubmit="return false">
                <label for="name">Name</label>
                <input id="name" type="text" name="name" class="span3">
                <label for="email">Email Address</label>
                <input id="email" type="email" name="email" class="span3">
                <label for="role">Role</label>
                <input id="role" type="text" name="role" class="span3">
                <input type="button" id="signupbutton" onclick="signup()" value="Sign up" class="btn btn-primary pull-right">
                <div class="clearfix">
                </div>
            </form>
        </div>
    </div>
    <p id="resultado">abc </p>
    <script >
      function signup()
      {
        const urlSignUp = "http://127.0.0.1:5000/IWeb/webresources/entity.usuario/";

        var nombre = document.getElementById('name').value;
        var correo = document.getElementById('email').value;
        var rol = document.getElementById('role').value;

        //document.getElementById("name").value = "";
        var datajson = '{\"nombre\":\"'+nombre+'\",\"email\":\"'+correo+'\",\"rol\":\"'+rol+'\"}';
        document.getElementById("resultado").innerHTML = datajson;

        if(nombre == "" || correo == "" || rol == "")
        {
          document.getElementById("resultado").innerHTML = "Error: data incomplete";
          return;
        }

        document.getElementById("resultado").innerHTML = datajson;

        var request = new XMLHttpRequest();

        request.open("POST",urlSignUp);
        request.setsetRequestHeader("Content-Type","application/json");
        document.getElementById("resultado").innerHTML = datajson + " -> " + this.readyState;
        request.onreadystatechange = function()
        {

          if(this.reareadyState == XMLH.DONE)
          {
            if(this.ststatus == 201)
            {
              document.getElementById("resultado").innerHTML = "User created successfully";
            }
            else
            {
              alert('Error: status code:' + request.status);
            }
          }
        }
        request.send(datajson);
      }
    </script>


</body>
</html>
